<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Transformations &mdash; pyny3d 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="pyny3d 0.1 documentation" href="index.html" /> 
  </head>
  <body role="document">
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>pyny3d 0.1 documentation</span></a></h1>
        <h2 class="heading"><span>Transformations</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        <a class="uplink" href="index.html">Contents</a>
        </p>

      </div>
      <div class="content">
        
        
  <p>Back to <a class="reference internal" href="tutorial.html#tutorials"><span>Tutorials</span></a></p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#transformations" id="id1">Transformations</a><ul>
<li><a class="reference internal" href="#move" id="id2">move</a></li>
<li><a class="reference internal" href="#zrotate" id="id3">zrotate</a></li>
<li><a class="reference internal" href="#mirror" id="id4">mirror</a></li>
<li><a class="reference internal" href="#matrix" id="id5">matrix</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="transformations">
<span id="tutorial-transformations"></span><h1><a class="toc-backref" href="#id1">Transformations</a><a class="headerlink" href="#transformations" title="Permalink to this headline">¶</a></h1>
<p><em>pyny3d</em> have some global methods to transform objects. These are <code class="docutils literal"><span class="pre">.move()</span></code>,
<code class="docutils literal"><span class="pre">.zrotate()</span></code>, <code class="docutils literal"><span class="pre">.mirror()</span></code> and <code class="docutils literal"><span class="pre">.matrix()</span></code>. In this section we are
going to see some examples for all of them for the following geometry:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pyny3d.geoms</span> <span class="kn">as</span> <span class="nn">pyny</span>

<span class="c1"># Declaring the geometry</span>
<span class="n">polygon</span> <span class="o">=</span> <span class="n">pyny</span><span class="o">.</span><span class="n">Polygon</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">8</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span><span class="mi">9</span><span class="p">],</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">]]))</span>

<span class="c1">## Surface</span>
<span class="n">poly_surf_0</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">]]),</span>
               <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mf">3.5</span><span class="p">]]),</span>
               <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mf">3.5</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mf">3.5</span><span class="p">]]),</span>
               <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">7</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mf">3.5</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mf">3.5</span><span class="p">]])]</span>

<span class="c1">## Obstacles</span>
<span class="n">wall_1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">4</span><span class="p">]])</span>
<span class="n">wall_2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mf">14.7</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span><span class="mf">14.7</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">5</span><span class="p">]])</span>
<span class="n">chimney</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">]])</span>

<span class="c1"># Building the solution</span>
<span class="n">place_0</span> <span class="o">=</span> <span class="n">pyny</span><span class="o">.</span><span class="n">Place</span><span class="p">(</span><span class="n">poly_surf_0</span><span class="p">,</span> <span class="n">melt</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">place_0</span><span class="o">.</span><span class="n">add_extruded_obstacles</span><span class="p">([</span><span class="n">wall_1</span><span class="p">,</span> <span class="n">wall_2</span><span class="p">,</span> <span class="n">chimney</span><span class="p">])</span>
<span class="n">polyhedron</span> <span class="o">=</span> <span class="n">place_0</span><span class="o">.</span><span class="n">polyhedra</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">place_1</span> <span class="o">=</span> <span class="n">pyny</span><span class="o">.</span><span class="n">Place</span><span class="p">(</span><span class="n">pyny</span><span class="o">.</span><span class="n">Surface</span><span class="p">(</span><span class="n">polygon</span><span class="p">))</span>
<span class="n">space</span> <span class="o">=</span> <span class="n">pyny</span><span class="o">.</span><span class="n">Space</span><span class="p">([</span><span class="n">place_0</span><span class="p">,</span> <span class="n">place_1</span><span class="p">])</span>
<span class="n">space</span><span class="o">.</span><span class="n">mesh</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>

<span class="c1"># Viz</span>
<span class="n">space</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">c_poly</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/space_1.png"><img alt="_images/space_1.png" src="_images/space_1.png" style="width: 480.0px; height: 358.2px;" /></a>
</div>
<p>It is important to note that in the case that the object we want to transform
is a Space, we have, except for <code class="docutils literal"><span class="pre">.zrotate()</span></code> the <em>inplace</em> option. Activating
it we can tell to the library to automatically add the transformed form of the
object to the current Space. For the rest of classes this lacks of sense and
they will return independent instances or lists of intances.</p>
<p>For example, it is completely normal to <em>move</em> a building and add add the copy
to the same Space of the original but it is incongruent to <em>move</em> a Polygon
and add the new Polygon to the same Polygon instance. A Polygon object only
contains one Polygon.</p>
<div class="section" id="move">
<h2><a class="toc-backref" href="#id2">move</a><a class="headerlink" href="#move" title="Permalink to this headline">¶</a></h2>
<p>This method is the simplest one. Indeed we will see how it works in the
<a class="reference internal" href="tutorial_space.html#tutorial-space"><span>Space tutorial</span></a> section. We only need to give the distance we want to
displace in a <em>tuple</em> or <em>ndarray</em>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1]: </span><span class="n">polygon_moved</span> <span class="o">=</span> <span class="n">polygon</span><span class="o">.</span><span class="n">move</span><span class="p">((</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">300</span><span class="p">))</span>
<span class="gp">   ...: </span><span class="n">polygon_moved</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="gp">   ...: </span>

<span class="gp">In [2]: </span><span class="n">space</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="gp">   ...: </span><span class="n">space</span><span class="o">.</span><span class="n">move</span><span class="p">((</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">   ...: </span><span class="n">space</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">c_poly</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">s_sop</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">   ...: </span><span class="n">space</span> <span class="o">=</span> <span class="n">space</span><span class="o">.</span><span class="n">restore</span><span class="p">()</span>  <span class="c1"># restore the Space to the state before the duplication</span>
<span class="gp">   ...: </span>
</pre></div>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/move.png"><img alt="_images/move.png" src="_images/move.png" style="width: 790.23px; height: 306.87px;" /></a>
</div>
</div>
<div class="section" id="zrotate">
<h2><a class="toc-backref" href="#id3">zrotate</a><a class="headerlink" href="#zrotate" title="Permalink to this headline">¶</a></h2>
<p>It is possible to rotate all the elements in an object through a matrix
operation that changes its the reference system. If the <em>axis</em> argument is
left None (by default) the rotation will be done about the centroid.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [3]: </span><span class="n">polyhedron_rotated</span> <span class="o">=</span> <span class="n">polyhedron</span><span class="o">.</span><span class="n">zrotate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
<span class="gp">   ...: </span><span class="n">polyhedron_rotated</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="gp">   ...: </span>

<span class="gp">In [4]: </span><span class="n">space_rotated</span> <span class="o">=</span> <span class="n">space</span><span class="o">.</span><span class="n">zrotate</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">   ...: </span><span class="n">space_rotated</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">c_poly</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="gp">   ...: </span>
</pre></div>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/zrotate.png"><img alt="_images/zrotate.png" src="_images/zrotate.png" style="width: 694.83px; height: 307.93px;" /></a>
</div>
</div>
<div class="section" id="mirror">
<h2><a class="toc-backref" href="#id4">mirror</a><a class="headerlink" href="#mirror" title="Permalink to this headline">¶</a></h2>
<p>Generates a symmetry of the Space respect global axes. If <code class="docutils literal"><span class="pre">'x'</span></code> is inputed,
the symmetry will be done so that all the <em>x</em> coordinates now will be <em>-x</em>. It
is also possible to do multiple symmetries at once by introducing, for
example <code class="docutils literal"><span class="pre">'xy'</span></code>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [5]: </span><span class="n">place_symmetry</span> <span class="o">=</span> <span class="n">place_0</span><span class="o">.</span><span class="n">mirror</span><span class="p">(</span><span class="s1">&#39;yz&#39;</span><span class="p">)</span>
<span class="gp">   ...: </span><span class="n">place_symmetry</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;t&#39;</span><span class="p">)</span>  <span class="c1"># better visualization</span>
<span class="gp">   ...: </span>

<span class="gp">In [6]: </span><span class="n">space</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="gp">   ...: </span><span class="n">space</span><span class="o">.</span><span class="n">mirror</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">   ...: </span><span class="n">space</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">c_poly</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">s_sop</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">   ...: </span><span class="n">space</span> <span class="o">=</span> <span class="n">space</span><span class="o">.</span><span class="n">restore</span><span class="p">()</span>
<span class="gp">   ...: </span>
</pre></div>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/mirror.png"><img alt="_images/mirror.png" src="_images/mirror.png" style="width: 788.11px; height: 304.75px;" /></a>
</div>
</div>
<div class="section" id="matrix">
<h2><a class="toc-backref" href="#id5">matrix</a><a class="headerlink" href="#matrix" title="Permalink to this headline">¶</a></h2>
<p>This function is actually the <code class="docutils literal"><span class="pre">.move()</span></code> method repeated for the main
directions. The first number of the tuple is the times that the object has to
be repeated and the second one is the distance between the same point for
the copies.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [7]: </span><span class="n">polyhedra_list</span> <span class="o">=</span> <span class="n">polyhedron</span><span class="o">.</span><span class="n">matrix</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="gp">   ...: </span><span class="n">place</span> <span class="o">=</span> <span class="n">pyny</span><span class="o">.</span><span class="n">Place</span><span class="p">(</span><span class="n">surface</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">]]),</span>
<span class="gp">   ...: </span>                   <span class="n">polyhedra</span><span class="o">=</span><span class="n">polyhedra_list</span><span class="p">)</span>
<span class="gp">   ...: </span><span class="n">place</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;t&#39;</span><span class="p">)</span>
<span class="gp">   ...: </span>
</pre></div>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/matrix.png"><img alt="_images/matrix.png" src="_images/matrix.png" style="width: 560.0px; height: 417.9px;" /></a>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Next tutorial: <a class="reference internal" href="tutorial_polygon.html#tutorial-polygon"><span>Polygon tutorial</span></a></p>
</div>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        <a class="uplink" href="index.html">Contents</a>
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, José Antonio Fernández-Fernández.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>